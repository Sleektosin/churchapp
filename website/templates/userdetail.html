<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="keywords"
      content="wrappixel, admin dashboard, html css dashboard, web dashboard, bootstrap 5 admin, bootstrap 5, css3 dashboard, bootstrap 5 dashboard, Matrix lite admin bootstrap 5 dashboard, frontend, responsive bootstrap 5 admin template, Matrix admin lite design, Matrix admin lite dashboard bootstrap 5 dashboard template"
    />
    <meta
      name="description"
      content="Matrix Admin Lite Free Version is powerful and clean admin dashboard template, inpired from Bootstrap Framework"
    />
    <meta name="robots" content="noindex,nofollow" />
    <title>Sleek</title>
    <!-- Favicon icon -->
       <link
      type="text/css"
      rel="stylesheet"
      href="{{url_for('static',filename='styles/style.min.css')}}"
    />
     <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="static/uploads/chemonics_fav.png"
    />
    <!-- Custom CSS -->
    <link
      href="static/lib/fullcalendar/dist/fullcalendar.min.css"
      rel="stylesheet"
    />
   <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">-->
 <!--
      <link
      type="text/css"
      rel="stylesheet"
      href="{{url_for('static',filename='lib/bootstrap/dist/css/bootstrap.min.css')}}"
    />-->

 
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  </head>

  <body>
    <!-- ============================================================== -->
    <!-- Preloader - style you can find in spinners.css -->
    <!-- ============================================================== -->
    <div class="preloader">
      <div class="lds-ripple">
        <div class="lds-pos"></div>
        <div class="lds-pos"></div>
      </div>
    </div>
    <!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <div
      id="main-wrapper"
      data-layout="vertical"
      data-navbarbg="skin5"
      data-sidebartype="full"
      data-sidebar-position="absolute"
      data-header-position="absolute"
      data-boxed-layout="full"
    >
      <!-- ============================================================== -->
      <!-- Topbar header - style you can find in pages.scss -->
      <!-- ============================================================== -->
      {% include "include/header.html" %}
      <!-- ============================================================== -->
      <!-- End Topbar header -->
      <!-- ============================================================== -->
      <!-- ============================================================== -->
      <!-- Left Sidebar - style you can find in sidebar.scss  -->
      <!-- ============================================================== -->
      {% include "include/leftnavbar.html" %}
      <!-- ============================================================== -->
      <!-- End Left Sidebar - style you can find in sidebar.scss  -->
      <!-- ============================================================== -->
      <!-- ============================================================== -->
      <!-- Page wrapper  -->
      <!-- ============================================================== -->
      <div class="page-wrapper">
        <!-- ============================================================== -->
        <!-- Breadcrumb and right sidebar toggle -->
        <!-- ============================================================== -->
        <div class="page-breadcrumb">
            <div class="row">
                <div class="col-12 d-flex no-block align-items-center">
                    <div class="ms-auto text-end">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <!-- <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">
                                  Library
                                </li>-->
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- End Breadcrumb and right sidebar toggle -->
        <!-- ============================================================== -->
    
        <!-- ============================================================== -->
        <!-- Container fluid  -->
        <!-- ============================================================== -->
        <div class="container-fluid">
            <!-- ============================================================== -->
            <!-- Start Page Content -->
            <!-- ============================================================== -->
            <div class="row">
                <div class="col-md-12">
                    <!-- Card -->
                    <div class="card">
                        <div class="card-body">
                          <h3 class="mb-4"><b>User Details</b></h3>
                            <!-- User Details Section -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="p-4">  
                                        <div class="form-group mb-3">
                                            <label for="username"><b>User Name:</b></label>
                                            <input type="text" class="form-control" readonly value="{{user.username}}" name="username" required>
                                        </div>
    
                                        <div class="form-group mb-3">
                                            <label for="lastname"><b>Last Name:</b></label>
                                            <input type="text" class="form-control" readonly value="{{user.last_name}}" name="lastname" required>
                                        </div>
    
                                        <!-- QR Code Section -->
                                        <div class="form-group text-center mb-4">
                                          {% if qr_code_data %}
                                          <img src="{% if not qr_code_data.startswith('data:image') %}data:image/png;base64,{% endif %}{{ qr_code_data }}" 
                                                   alt="QR Code" 
                                                   class="img-fluid" 
                                                   style="max-width: 150px; width: 100%;"/>
                                          {% else %}
                                              <p class="text-danger">QR Code not available</p>
                                          {% endif %}
                                      </div>
                                      <!-- Only show button if QR exists -->
                                      {% if qr_code_data %}
                                      <div class="text-center">
                                          <button class="btn btn-primary" id="downloadQrCodeBtn">
                                              Download QR Code
                                          </button>
                                      </div>
                                      {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="p-4">
                                      <div class="form-group mb-3">
                                          <label for="firstname"><b>First Name:</b></label>
                                          <input type="text" class="form-control" readonly value="{{user.first_name}}" name="firstname" required>
                                      </div>
  
                                      <div class="form-group mb-3">
                                          <label for="email"><b>Email:</b></label>
                                          <input type="email" class="form-control" readonly value="{{user.email}}" name="email" required>
                                      </div>
                                  </div>
                              </div>
    
                                <!-- Assigned Users Section -->
                                <!-- <div class="col-md-6">
                                    <div class="p-4">
                                        <h4 class="mb-3"><b>Assigned Users</b></h4>
    
                                        <ul class="list-group mb-4">
                                            <li class="list-group-item d-flex align-items-center">
                                                <div class="form-check me-3">
                                                    <input type="checkbox" class="form-check-input" id="customCheck" />
                                                </div>
                                                <div class="ms-auto">
                                                    <ul class="list-style-none d-flex mb-0">
                                                        <li class="assignee me-3">
                                                            <img class="rounded-circle" width="40" src="../assets/images/users/2.jpg" alt="user" data-toggle="tooltip" title="Jessica" />
                                                        </li>
                                                        <!-- Additional assigned users can be added here -->
                                                    </ul>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- ============================================================== -->
            <!-- End Page Content -->
            <!-- ============================================================== -->
        </div>
        <!-- ============================================================== -->
        <!-- End Container fluid  -->
        <!-- ============================================================== -->
    
        <!-- ============================================================== -->
        <!-- Footer -->
        <!-- ============================================================== -->
        <footer class="footer text-center">
            All Rights Reserved by &copy; Sleektech. Designed and Developed by
            <a href="http://sleektechsystems.com.ng/" target="_blank">SleekTech</a>
        </footer>
        <!-- ============================================================== -->
        <!-- End Footer -->
        <!-- ============================================================== -->
    </div>
    
      <!-- ============================================================== -->
      <!-- End Page wrapper  -->
      <!-- ============================================================== -->
    </div>
    <!-- ============================================================== -->
    <!-- End Wrapper -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- All Jquery -->
    <!-- ============================================================== -->
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>-->
    <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
    <!-- Include all compiled plugins (below), or include individual files as needed -->

    <script src="{{ url_for('static',filename='lib/jquery/dist/jquery.min.js') }}"></script>
    <script src="{{url_for('static',filename='lib/bootstrap/dist/js/bootstrap.min.js')}}"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!--<script src="{{ url_for('static',filename='lib/jquery/dist/jquery.min.js') }}"></script>-->
    <!-- <script src="../assets/libs/jquery/dist/jquery.min.js"></script> -->
    <script src="{{url_for('static',filename='javascript/jquery.ui.touch-punch-improved.js')}}"></script>
    <!--<script src="../dist/js/jquery.ui.touch-punch-improved.js"></script> -->
    <script src="{{url_for('static',filename='javascript/jquery-ui.min.js')}}"></script>
    <!--<script src="../dist/js/jquery-ui.min.js"></script> -->
    <!-- Bootstrap tether Core JavaScript -->
    <script src="{{url_for('static',filename='lib/bootstrap/dist/js/bootstrap.bundle.min.js')}}"></script>
    <!--<script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script> -->
    <!-- slimscrollbar scrollbar JavaScript -->
    <script src="{{url_for('static',filename='lib/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js')}}"></script>
    <!--<script src="../assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>-->
    <script src="{{url_for('static',filename='extra-libs/sparkline/sparkline.js')}}"></script>
    <!--<script src="../assets/extra-libs/sparkline/sparkline.js"></script> -->
    <!--Wave Effects -->
    <script src="{{url_for('static',filename='javascript/waves.js')}}"></script>
    <!--<script src="../dist/js/waves.js"></script>-->
    <!--Menu sidebar -->
    <script src="{{url_for('static',filename='javascript/sidebarmenu.js')}}"></script>
    <!--<script src="../dist/js/sidebarmenu.js"></script>-->
    <!--Custom JavaScript -->
    <script src="{{url_for('static',filename='javascript/custom.min.js')}}"></script>
    <!--<script src="../dist/js/custom.min.js"></script>-->
    <!-- this page js -->
    <script src="{{url_for('static',filename='lib/moment/min/moment.min.js')}}"></script>
    <!--<script src="../assets/libs/moment/min/moment.min.js"></script>-->
    <script src="{{url_for('static',filename='lib/fullcalendar/dist/fullcalendar.min.js')}}"></script>
    <!--<script src="../assets/libs/fullcalendar/dist/fullcalendar.min.js"></script>-->
    <script src="{{url_for('static',filename='javascript/pages/calendar/cal-init.js')}}"></script>

    <!--<script src="../dist/js/pages/calendar/cal-init.js"></script>-->
    
</script>
<script>
  document.getElementById('downloadQrCodeBtn')?.addEventListener('click', () => {
      const qrImg = document.querySelector('.form-group img');
      if (qrImg) {
          try {
              // Get user's first name and last name from the form inputs
              const firstName = document.querySelector('input[name="firstname"]').value;
              const lastName = document.querySelector('input[name="lastname"]').value;
              
              // Create filename (sanitize to remove special characters)
              const sanitize = (str) => str.replace(/[^a-z0-9]/gi, '_').toLowerCase();
              const filename = `${sanitize(firstName)}_${sanitize(lastName)}_qrcode.png`;
              
              const link = document.createElement('a');
              link.href = qrImg.src;
              link.download = filename;
              document.body.appendChild(link);
              link.click();
              document.body.removeChild(link);
          } catch (error) {
              console.error('Download failed:', error);
              alert('Failed to download QR code. Please try again.');
          }
      }
  });
  </script>
  </body>
</html>
